!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("libs/spin",t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var o=["opacity",t,~~(100*e),n,i].join("-"),r=.01+n/i*100,s=Math.max(1-(1-e)/t*(100-r),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return u[o]||(p.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",p.cssRules.length),u[o]=1),o}function i(e,t){var n,i,o=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==o[t])return t;for(i=0;i<d.length;i++)if(n=d[i]+t,void 0!==o[n])return n}function o(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function a(e){this.opts=r(e||{},a.defaults,f)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,i){function r(){return o(n("group",{coordsize:p+" "+p,coordorigin:-c+" "+-c}),{width:p,height:p})}function a(e,a,l){t(u,t(o(r(),{rotation:360/i.lines*e+"deg",left:~~a}),t(o(n("roundrect",{arcsize:i.corners}),{width:c,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:l}),n("fill",{color:s(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,c=i.scale*(i.length+i.width),p=2*i.scale*c,d=-(i.width+i.length)*i.scale*2+"px",u=o(r(),{position:"absolute",top:d,left:d});if(i.shadow)for(l=1;l<=i.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)a(l);return t(e,u)},a.prototype.opacity=function(e,t,n,i){var o=e.firstChild;i=i.shadow&&i.lines||0,o&&t+i<o.childNodes.length&&(o=o.childNodes[t+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,p,d=["webkit","Moz","ms","O"],u={},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(a.defaults={},r(a.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,r=n.el=e(null,{className:i.className});if(o(r,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!c){var s,a=0,l=(i.lines-1)*(1-i.direction)/2,p=i.fps,d=p/i.speed,u=(1-i.opacity)/(d*i.trail/100),f=d/i.lines;!function h(){a++;for(var e=0;e<i.lines;e++)s=Math.max(1-(a+(i.lines-e)*f)%d*u,i.opacity),n.opacity(r,e*i.direction+l,s,i);n.timeout=n.el&&setTimeout(h,~~(1e3/p))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,r){function a(t,n){return o(e(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*p+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var l,p=0,d=(r.lines-1)*(1-r.direction)/2;p<r.lines;p++)l=o(e(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,d+p*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(l,o(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(l,a(s(r.color,p),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var h=o(e("group"),{behavior:"url(#default#VML)"});!i(h,"transform")&&h.adj?l():c=i(h,"animation")}return a});var opts={lines:11,width:3};define("core/ef_plugins/spinnerhelper",["jquery","libs/spin"],function(e,t){!function(e,n,i,o){function r(t,n){this.element=t,this.$element=e(t),this.metadata=this.$element.data("spinnerhelper-options"),this.options=e.extend({},a,n,this.metadata),this.options.type=this.options.type.toLowerCase(),("inline"===this.options.type||"overlay"===this.options.type)&&(this._defaults=a,this._name=s,this.init())}var s="spinnerhelper",a={type:"inline",delay:500,spinOpts:{lines:11,width:3,scale:.5}};r.prototype={init:function(){var i=this;e("body"),e(n);i.spinner=new t(i.options.spinOpts),i.isSpinning=!1,i.timeoutID=-1,"overlay"===i.options.type&&(i.$overlay=e('<div class="spinner-overlay"></div>').css("display","none"),i.$centerer=e('<div class="spinner-centerer"></div>'),i.$element.append(i.$overlay.append(i.$centerer))),i.start()},stop:function(){var t=this;e("body"),e(n);if(!t.isSpinning)return clearTimeout(t.timeoutID),void(t.timeoutID=-1);switch(t.options.type){case"inline":t.spinner.stop(),t.isSpinning=!1;break;case"overlay":t.spinner.stop(),t.$overlay.css("display","none"),t.isSpinning=!1}},start:function(){var t=this;e("body"),e(n);if(!t.isSpinning)switch(t.options.type){case"inline":t.timeoutID=_.delay(function(){t.spinner.spin(t.element),t.isSpinning=!0},t.options.delay);break;case"overlay":t.timeoutID=_.delay(function(){t.$overlay.css("display","block"),t._centerSpinner(),t.spinner.spin(t.$centerer[0]),t.isSpinning=!0},t.options.delay)}},_centerSpinner:function(){var t,o,r,s,a,l=this,c=l.$element.offset().top,p=l.$element.outerHeight(!1),d=c+p,u=e(i).scrollTop(),f=e(n).height(),h=u+f;t=h>c&&d>u,t?(o=u-c,o>=0?(a=o,r=p-o,s=r>f?f:r):(a=0,r=f+o,s=r>p?p:r)):(s=p,a=0),l.$centerer.css({width:l.$element.outerWidth(),height:s,position:"relative",top:a})},destroy:function(){var e=this;return e.stop(),"overlay"===e.options.type&&e.$overlay.remove(),e.$element.removeData("plugin_"+s),null}},e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new r(this,t))})}}(e,window,document)}),function(e){"function"==typeof define&&define.amd?define("libs/jquery.cookie",["jquery"],e):e(jQuery)}(function(e){function t(e){return a.raw?e:encodeURIComponent(e)}function n(e){return a.raw?e:decodeURIComponent(e)}function i(e){return t(a.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),a.json?JSON.parse(e):e}catch(t){}}function r(t,n){var i=a.raw?t:o(t);return e.isFunction(n)?n(i):i}var s=/\+/g,a=e.cookie=function(o,s,l){if(void 0!==s&&!e.isFunction(s)){if(l=e.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,p=l.expires=new Date;p.setTime(+p+864e5*c)}return document.cookie=[t(o),"=",i(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=o?void 0:{},u=document.cookie?document.cookie.split("; "):[],f=0,h=u.length;h>f;f++){var m=u[f].split("="),y=n(m.shift()),v=m.join("=");if(o&&o===y){d=r(v,s);break}o||void 0===(v=r(v))||(d[y]=v)}return d};a.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("core/wfm/leadformstc",["jquery","core/global/compensatrs","core/ef_plugins/spinnerhelper","libs/jquery.cookie"],function(e,t){var n,i=window.EFTOURS||{};return i.leadformstc=function(){function i(e){return e.find("#leadFormName").val()}return{leadFormSpinner:null,isCta:!1,leadFormInit:function(e,n,o,r,s){isCta=s;var a=e.find("form");i(a);a.attr("data-ajax-update","#tour-consultant-info-form"),t.handleTelLinks()},leadFormBegin:function(t){var i=e(this);i.find(":submit").attr("disabled","disabled"),i.attr("data-ajax-update","#tour-consultant-info-form"),this.leadFormSpinner&&(this.leadFormSpinner=this.leadFormSpinner.destroy()),this.leadFormSpinner=i.closest(".panel").spinnerhelper({type:"overlay",delay:100}).data("plugin_spinnerhelper"),n=i.find("#intro").text()},leadFormComplete:function(t,i){var o=e("#"+this.getAttribute("id"));this.leadFormSpinner&&(this.leadFormSpinner=this.leadFormSpinner.destroy()),o.attr("data-ajax-update","#tour-consultant-info-form"),o.find("#intro").text(n)},leadFormSuccess:function(t,n,o){var r=e(this),s=i(r),a=document.domain.toString(),l=a.split("."),c="."+l[l.length-2]+"."+l[l.length-1];if(e(".form-success").length>0){dataLayer.push({event:"load",context:s+" Confirmation",pageType:"virtual"}),e.cookie.raw=!0;var p="Count=3&Disable=true";e.cookie("EFFEDCK",p,{expires:180,path:"/",domain:c}),e.cookie.raw=!1}e("#tour-consultant-container").find("#tc__change-zipcode").addClass("display-none"),window.EFTOURS.device.isTouch===!0&&(document.body.scrollTop=document.documentElement.scrollTop=0)},leadFormFailure:function(t,n,o){var r=e(this),s=i(r);dataLayer.push({event:"load",context:s+" Error",pageType:"virtual"})}}}()});
//# sourceMappingURL=leadformstc.js.map