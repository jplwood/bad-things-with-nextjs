Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1},"undefined"==typeof String.prototype.contains&&(String.prototype.contains=function(e){return-1!=this.indexOf(e)}),define("core/global/helpers",["jquery","underscore"],function(e,t){return console.log("global/helpers"),{getFuncFromString:function(e){var t,n,i,s;if("function"!=typeof e)for(t=e.split("."),i=t.length,n=0;i>n;n++)s=null!=s?s[t[n]]:window[t[n]];else s=e;return s},toBool:function(e){if(t.isBoolean(e))return e;if(t.isString(e))return"true"===e.toLowerCase();throw new Error("The toBool() function only works with strings and booleans.")},mapKeys:function(e,n){return t.each(e,function(t,i,s){var o=n[i];o&&(e[o]=t,delete e[i])}),e},constructUrl:function(t){var n;return n=e.param(t),n=n.length>0?"?"+n:document.location.pathname},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},validate:function(e,t){var n=!0;switch(e){case"name":if(t){var i=/^[a-zA-Z \-]+$/i;n=i.test(t)}break;case"email":if(t){var s=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;n=s.test(t)}break;case"phone":if(t){t=t.replace(/[.()-]/g,"").replace(/ /,"");var o=/^[0-9]{7,25}$/;n=o.test(t)}break;case"passport":if(t){var a=/^[\w\d]{1,12}$/;n=a.test(t)}break;case"countryCode":if(t){var r=/^[a-zA-Z]{3,}$/;n=r.test(t)}break;case"date":if(t){var l=/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/;n=l.test(t)}break;case"dateTextInput":if(t){var l=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/;n=l.test(t)}}return Boolean(n)},getCurrentDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return n+"/"+t+"/"+i}}}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("libs/spin",t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var s=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-o),e),r=p.substring(0,p.indexOf("Animation")).toLowerCase(),l=r&&"-"+r+"-"||"";return u[s]||(c.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",c.cssRules.length),u[s]=1),s}function i(e,t){var n,i,s=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==s[t])return t;for(i=0;i<h.length;i++)if(n=h[i]+t,void 0!==s[n])return n}function s(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function r(e){this.opts=o(e||{},r.defaults,d)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}c.addRule(".spin-vml","behavior:url(#default#VML)"),r.prototype.lines=function(e,i){function o(){return s(n("group",{coordsize:c+" "+c,coordorigin:-p+" "+-p}),{width:c,height:c})}function r(e,r,l){t(u,t(s(o(),{rotation:360/i.lines*e+"deg",left:~~r}),t(s(n("roundrect",{arcsize:i.corners}),{width:p,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:l}),n("fill",{color:a(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,p=i.scale*(i.length+i.width),c=2*i.scale*p,h=-(i.width+i.length)*i.scale*2+"px",u=s(o(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)r(l);return t(e,u)},r.prototype.opacity=function(e,t,n,i){var s=e.firstChild;i=i.shadow&&i.lines||0,s&&t+i<s.childNodes.length&&(s=s.childNodes[t+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}}var p,c,h=["webkit","Moz","ms","O"],u={},d={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(r.defaults={},o(r.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,o=n.el=e(null,{className:i.className});if(s(o,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!p){var a,r=0,l=(i.lines-1)*(1-i.direction)/2,c=i.fps,h=c/i.speed,u=(1-i.opacity)/(h*i.trail/100),d=h/i.lines;!function f(){r++;for(var e=0;e<i.lines;e++)a=Math.max(1-(r+(i.lines-e)*d)%h*u,i.opacity),n.opacity(o,e*i.direction+l,a,i);n.timeout=n.el&&setTimeout(f,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function r(t,n){return s(e(),{position:"absolute",width:o.scale*(o.length+o.width)+"px",height:o.scale*o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.scale*o.radius+"px,0)",borderRadius:(o.corners*o.scale*o.width>>1)+"px"})}for(var l,c=0,h=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)l=s(e(),{position:"absolute",top:1+~(o.scale*o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:p&&n(o.opacity,o.trail,h+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(l,s(r("#000","0 0 4px #000"),{top:"2px"})),t(i,t(l,r(a(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){c=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var f=s(e("group"),{behavior:"url(#default#VML)"});!i(f,"transform")&&f.adj?l():p=i(f,"animation")}return r});var opts={lines:11,width:3};define("core/ef_plugins/spinnerhelper",["jquery","libs/spin"],function(e,t){!function(e,n,i,s){function o(t,n){this.element=t,this.$element=e(t),this.metadata=this.$element.data("spinnerhelper-options"),this.options=e.extend({},r,n,this.metadata),this.options.type=this.options.type.toLowerCase(),("inline"===this.options.type||"overlay"===this.options.type)&&(this._defaults=r,this._name=a,this.init())}var a="spinnerhelper",r={type:"inline",delay:500,spinOpts:{lines:11,width:3,scale:.5}};o.prototype={init:function(){var i=this;e("body"),e(n);i.spinner=new t(i.options.spinOpts),i.isSpinning=!1,i.timeoutID=-1,"overlay"===i.options.type&&(i.$overlay=e('<div class="spinner-overlay"></div>').css("display","none"),i.$centerer=e('<div class="spinner-centerer"></div>'),i.$element.append(i.$overlay.append(i.$centerer))),i.start()},stop:function(){var t=this;e("body"),e(n);if(!t.isSpinning)return clearTimeout(t.timeoutID),void(t.timeoutID=-1);switch(t.options.type){case"inline":t.spinner.stop(),t.isSpinning=!1;break;case"overlay":t.spinner.stop(),t.$overlay.css("display","none"),t.isSpinning=!1}},start:function(){var t=this;e("body"),e(n);if(!t.isSpinning)switch(t.options.type){case"inline":t.timeoutID=_.delay(function(){t.spinner.spin(t.element),t.isSpinning=!0},t.options.delay);break;case"overlay":t.timeoutID=_.delay(function(){t.$overlay.css("display","block"),t._centerSpinner(),t.spinner.spin(t.$centerer[0]),t.isSpinning=!0},t.options.delay)}},_centerSpinner:function(){var t,s,o,a,r,l=this,p=l.$element.offset().top,c=l.$element.outerHeight(!1),h=p+c,u=e(i).scrollTop(),d=e(n).height(),f=u+d;t=f>p&&h>u,t?(s=u-p,s>=0?(r=s,o=c-s,a=o>d?d:o):(r=0,o=d+s,a=o>c?c:o)):(a=c,r=0),l.$centerer.css({width:l.$element.outerWidth(),height:a,position:"relative",top:r})},destroy:function(){var e=this;return e.stop(),"overlay"===e.options.type&&e.$overlay.remove(),e.$element.removeData("plugin_"+a),null}},e.fn[a]=function(t){return this.each(function(){e.data(this,"plugin_"+a)||e.data(this,"plugin_"+a,new o(this,t))})}}(e,window,document)}),function(e){"function"==typeof define&&define.amd?define("libs/jquery.cookie",["jquery"],e):e(jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function n(e){return r.raw?e:decodeURIComponent(e)}function i(e){return t(r.json?JSON.stringify(e):String(e))}function s(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),r.json?JSON.parse(e):e}catch(t){}}function o(t,n){var i=r.raw?t:s(t);return e.isFunction(n)?n(i):i}var a=/\+/g,r=e.cookie=function(s,a,l){if(void 0!==a&&!e.isFunction(a)){if(l=e.extend({},r.defaults,l),"number"==typeof l.expires){var p=l.expires,c=l.expires=new Date;c.setTime(+c+864e5*p)}return document.cookie=[t(s),"=",i(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=s?void 0:{},u=document.cookie?document.cookie.split("; "):[],d=0,f=u.length;f>d;d++){var m=u[d].split("="),g=n(m.shift()),y=m.join("=");if(s&&s===g){h=o(y,a);break}s||void 0===(y=o(y))||(h[g]=y)}return h};r.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("core/wfm/leadforms",["jquery","core/global/compensatrs","core/ef_plugins/spinnerhelper","libs/jquery.cookie"],function(e,t){var n=window.EFTOURS||{};return n.leadforms=function(){function n(e){return e.find("#leadFormName").val()}function i(e){e.length>0&&window.scrollTo(0,e.offset().top+-20)}return{leadFormSpinner:null,isCta:!1,leadFormInit:function(e,i,s,o,a){isCta=a;var r,l=e.find("form");n(l);r=isCta?"#"+e.attr("id")+" .cta-body":"#"+e.attr("id")+" .panel-body",l.attr("data-ajax-update",r),t.handleTelLinks()},leadFormBegin:function(t){var n=e(this);"undefined"!=typeof isCta&&(isCta||($panelTop=e("#"+n.closest(".panel").attr("id")+" .panel-header"),i($panelTop))),n.find(":submit").attr("disabled","disabled"),this.leadFormSpinner&&(this.leadFormSpinner=this.leadFormSpinner.destroy()),this.leadFormSpinner=n.closest(".panel").spinnerhelper({type:"overlay",delay:100}).data("plugin_spinnerhelper")},leadFormComplete:function(t,n){var i,s=e("#"+this.getAttribute("id"));this.leadFormSpinner&&(this.leadFormSpinner=this.leadFormSpinner.destroy()),i=isCta?"#"+s.closest(".panel").attr("id")+" .cta-body":"#"+s.closest(".panel").attr("id")+" .panel-body",s.attr("data-ajax-update",i)},leadFormSuccess:function(t,i,s){var o=e(this),a=n(o),r=document.domain.toString(),l=r.split("."),p="."+l[l.length-2]+"."+l[l.length-1];if(e(".form-success").length>0){dataLayer.push({event:"load",context:a+" Confirmation",pageType:"virtual"}),e.cookie.raw=!0;var c="Count=3&Disable=true";e.cookie("EFFEDCK",c,{expires:180,path:"/",domain:p}),e.cookie.raw=!1}},leadFormFailure:function(t,i,s){var o=e(this),a=n(o);dataLayer.push({event:"load",context:a+" Error",pageType:"virtual"})}}}()}),define("core/modules/breakdance",["jquery","libs/enquire","core/global/helpers"],function(e,t,n){return{register:function(e,i,s){t.register("screen and (max-width : "+e+"px)",{match:function(){(i=n.getFuncFromString(i))()},unmatch:function(){(s=n.getFuncFromString(s))()}})}}}),console.log("sticky"),function(){!function(e,t){return"function"==typeof define&&define.amd?define("libs/jquery.waypoints-sticky",["jquery","waypoints"],t):t(e.jQuery)}(this,function(e){var t,n;return t={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck"},n=function(e,t){return e.wrap(t.wrapper),e.parent()},e.waypoints("extendFn","sticky",function(i){var s,o,a;return o=e.extend({},e.fn.waypoint.defaults,t,i),s=n(this,o),a=o.handler,o.handler=function(t){var n,i;return n=e(this).children(":first"),i="down"===t||"right"===t,s.height(i?n.outerHeight():""),n.toggleClass(o.stuckClass,i),null!=a?a.call(this,t):void 0},s.waypoint(o),this.data("stuckClass",o.stuckClass)}),e.waypoints("extendFn","unsticky",function(){return this.parent().waypoint("destroy"),this.unwrap(),this.removeClass(this.data("stuckClass"))})})}.call(this),define("core/global/leadgen",["jquery","core/global/state","waypoints","libs/jquery.waypoints-sticky"],function(e,t){console.log("global/leadgen");var n=function(t){return t.stickyGlass=function(){function e(){window.innerWidth>1024?n():t()}function t(){document.body.style.paddingTop="0px",document.body.classList.remove("is-stuck"),i.classList.remove("stuck")}function n(){window.scrollY>=o?(document.body.classList.add("is-stuck"),i.classList.add("stuck"),i.style.height="64px"):t()}var i=document.querySelector(".cta-stage-glass"),s=document.querySelector("#main"),o=s.offsetTop+i.offsetTop;EFTOURS.device.isTouch||(window.addEventListener("resize",e),window.addEventListener("scroll",e))},t.tourSubnav=function(){var t=e(".cta-stage-glass-subnav li");e(".tour-name").waypoint(function(e){},{offset:e(".cta-stage-glass").innerHeight()}).waypoint(function(n){"up"===n&&(e("body").hasClass("is-stuck")||t.removeClass("active"))},{offset:e(".cta-stage-glass").innerHeight()-5}),e(".cta-stage-glass-subnav a").click(function(n){n.preventDefault(),t.removeClass("active");var i=e(this).closest("li"),s=e(i).attr("id");""!=s&&(t.removeClass("active"),e(i).addClass("active")),e("html, body").animate({scrollTop:e(e(this).attr("href")).offset().top-e(".cta-stage-glass").innerHeight()},1e3)})},t.expandoForm=function(){var t=e(".expando-form .expando"),n=e(".expando-form .expando-trigger"),i=e(".expando-form .expando-trigger input[type='checkbox']");e(n).click(function(n){var s=e(n.target),o=s.is(i);t.slideToggle(),o||(n.stopPropagation(),n.preventDefault(),e(i).is(":checked")?e(i).prop("checked",!1):e(i).prop("checked",!0))})},t}(window.EFTOURS.leadgen||{});return n}),function(e){define("handlebars",[],function(){return function(){this.Handlebars={},function(e){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(2!==arguments.length)throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(i,s){var o=s.inverse||function(){},a=s.fn,r=t.call(i);return r===n&&(i=i.call(this)),i===!0?a(this):i===!1||null==i?o(this):"[object Array]"===r?i.length>0?e.helpers.each(i,s):o(this):a(i)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var i=e.logger.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var i,s=n.fn,o=n.inverse,a=0,r="";if(n.data&&(i=e.createFrame(n.data)),t&&"object"==typeof t)if(t instanceof Array)for(var l=t.length;l>a;a++)i&&(i.index=a),r+=s(t[a],{data:i});else for(var p in t)t.hasOwnProperty(p)&&(i&&(i.key=p),r+=s(t[p],{data:i}),a++);return 0===a&&(r=o(this)),r}),e.registerHelper("if",function(i,s){var o=t.call(i);return o===n&&(i=i.call(this)),!i||e.Utils.isEmpty(i)?s.inverse(this):s.fn(this)}),e.registerHelper("unless",function(t,n){var i=n.fn,s=n.inverse;return n.fn=s,n.inverse=i,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}(this.Handlebars);var t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(e,t,n,i,s,o,a){var r=o.length-1;switch(s){case 1:return o[r-1];case 2:this.$=new i.ProgramNode([],o[r]);break;case 3:this.$=new i.ProgramNode(o[r-2],o[r]);break;case 4:this.$=new i.ProgramNode(o[r-1],[]);break;case 5:this.$=new i.ProgramNode(o[r]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[r]];break;case 9:o[r-1].push(o[r]),this.$=o[r-1];break;case 10:this.$=new i.BlockNode(o[r-2],o[r-1].inverse,o[r-1],o[r]);break;case 11:this.$=new i.BlockNode(o[r-2],o[r-1],o[r-1].inverse,o[r]);break;case 12:this.$=o[r];break;case 13:this.$=o[r];break;case 14:this.$=new i.ContentNode(o[r]);break;case 15:this.$=new i.CommentNode(o[r]);break;case 16:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1]);break;case 17:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1]);break;case 18:this.$=o[r-1];break;case 19:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1]);break;case 20:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1],!0);break;case 21:this.$=new i.PartialNode(o[r-1]);break;case 22:this.$=new i.PartialNode(o[r-2],o[r-1]);break;case 23:break;case 24:this.$=[[o[r-2]].concat(o[r-1]),o[r]];break;case 25:this.$=[[o[r-1]].concat(o[r]),null];break;case 26:this.$=[[o[r-1]],o[r]];break;case 27:this.$=[[o[r]],null];break;case 28:this.$=[[new i.DataNode(o[r])],null];break;case 29:o[r-1].push(o[r]),this.$=o[r-1];break;case 30:this.$=[o[r]];break;case 31:this.$=o[r];break;case 32:this.$=new i.StringNode(o[r]);break;case 33:this.$=new i.IntegerNode(o[r]);break;case 34:this.$=new i.BooleanNode(o[r]);break;case 35:this.$=new i.DataNode(o[r]);break;case 36:this.$=new i.HashNode(o[r]);break;case 37:o[r-1].push(o[r]),this.$=o[r-1];break;case 38:this.$=[o[r]];break;case 39:this.$=[o[r-2],o[r]];break;case 40:this.$=[o[r-2],new i.StringNode(o[r])];break;case 41:this.$=[o[r-2],new i.IntegerNode(o[r])];break;case 42:this.$=[o[r-2],new i.BooleanNode(o[r])];break;case 43:this.$=[o[r-2],new i.DataNode(o[r])];break;case 44:this.$=new i.PartialNameNode(o[r]);break;case 45:this.$=new i.IdNode(o[r]);break;case 46:o[r-2].push(o[r]),this.$=o[r-2];break;case 47:this.$=[o[r]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],s=[null],o=[],a=this.table,r="",l=0,p=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,y,b,v,x,k,S={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=t()),g=a[m]&&a[m][d]),"undefined"==typeof g||!g.length||!g[0]){var w="";if(!c){k=[];for(b in a[m])this.terminals_[b]&&b>2&&k.push("'"+this.terminals_[b]+"'");w=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:i.push(d),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),d=null,f?(d=f,f=null):(p=this.lexer.yyleng,r=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[g[1]][1],S.$=s[s.length-v],S._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},u&&(S._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,r,p,l,this.yy,g[1],s,o),"undefined"!=typeof y)return y;v&&(i=i.slice(0,-1*v*2),s=s.slice(0,-1*v),o=o.slice(0,-1*v)),i.push(this.productions_[g[1]][0]),s.push(S.$),o.push(S._$),x=a[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){switch(n){case 0:if("\\"!==t.yytext.slice(-1)&&this.begin("mu"),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1),this.begin("emu")),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1)),14;case 3:return t.yytext=t.yytext.substr(0,t.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return t.yytext=t.yytext.substr(3,t.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),30;case 22:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\'/g,"'"),30;case 23:return t.yytext=t.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return t.yytext=t.yytext.substr(1,t.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-\/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();Handlebars.Parser=t,Handlebars.parse=function(e){return e.constructor===Handlebars.AST.ProgramNode?e:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e))},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(s.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,i,s){e(t.id,s),this.type="block",this.mustache=t,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");
for(var t=[],n=0,i=0,s=e.length;s>i;i++){var o=e[i];if(".."===o||"."===o||"this"===o){if(t.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);".."===o?n++:this.isScoped=!0}else t.push(o)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=1===e.length&&!this.isScoped&&0===n,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var n=["description","fileName","lineNumber","message","name","number","stack"];return Handlebars.Exception=function(e){for(var t=Error.prototype.constructor.apply(this,arguments),i=0;i<n.length;i++)this[n[i]]=t[n[i]]},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,i=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():null==e||e===!1?"":n.test(e)?e.replace(t,i):e},isEmpty:function(e){return e||0===e?"[object Array]"===Object.prototype.toString.call(e)&&0===e.length?!0:!1:!0}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){for(var e,t,n,i=this.opcodes,s=[],o=0,a=i.length;a>o;o++)if(e=i[o],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var r=0;r<e.args.length;r++)n=e.args[r],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],s=e.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==s.args[o])return!1}return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t,n=e.statements;this.opcodes=[];for(var i=0,s=n.length;s>i;i++)t=n[i],this[t.type](t);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,o=n.depths.list.length;o>s;s++)t=n.depths.list[s],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=this.classifyMustache(t);"helper"===s?this.helperMustache(t,n,i):"simple"===s?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var s=0,o=i.length;o>s;s++)t=i[s],n=t[1],this.options.stringParams?this.opcode("pushStringParam",n.stringModeValue,n.type):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var i=e.id,s=i.parts[0],o=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,o)},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",i.length,s)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var s=e.id.parts[0];i.knownHelpers[s]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var s,o=e.opcodes;for(this.i=0,a=o.length;this.i<a;this.i++)s=o[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,o=this.environment.depths.list.length;o>s;s++)i.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(!this.isChild){var r=Handlebars.COMPILER_REVISION,l=Handlebars.REVISION_CHANGES[r];a="this.compilerInfo = ["+r+",'"+l+"'];\n"+a}if(e)return i.push(a),Function.apply(this,i);var p="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return Handlebars.log(Handlebars.logger.DEBUG,p+"\n\n"),p},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=void 0,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.source.push("else { "+o+" = "+s+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n=this.popStack();this.options.stringParams&&(t=this.popStack(),this.popStack());var i=this.hash;t&&i.types.push("'"+e+"': "+t),i.values.push("'"+e+"': ("+n+")")},compiler:t,compileChildren:function(e,t){for(var n,i,s=e.children,o=0,a=s.length;a>o;o++){n=s[o],i=new this.compiler;var r=this.matchExistingProgram(n);null==r?(this.context.programs.push(""),r=this.context.programs.length,n.index=r,n.name="program"+r,this.context.programs[r]=i.compile(n,t,this.context),this.context.environments[r]=n):(n.index=r,n.name="program"+r)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,s=[n.index,n.name,"data"],o=0,a=i.length;a>o;o++)t=i[o],1===t?s.push("depth0"):s.push("depth"+(t-1));return 0===i.length?"self.program("+s.join(", ")+")":(s.shift(),"self.programWithDepth("+s.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i="",s=this.isInline();if(s){var o=this.popStack(!0);if(o instanceof n)t=o.value;else{var a=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(a)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var r=e.call(this,t);return s?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+r+")")):(/^stack/.test(t)||(t=this.nextStack()),this.source.push(t+" = ("+i+r+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var s=e[t];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();return!e&&i instanceof n?i.value:(t||this.stackSlot--,i)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof n?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var i=[];this.setupParams(e,i,n);var s=this.nameLookup("helpers",t,"helper");return{params:i,name:s,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupParams:function(e,t,n){var i,s,o,a=[],r=[],l=[];a.push("hash:"+this.popStack()),s=this.popStack(),o=this.popStack(),(o||s)&&(o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),a.push("inverse:"+s),a.push("fn:"+o));for(var p=0;e>p;p++)i=this.popStack(),t.push(i),this.options.stringParams&&(l.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(a.push("contexts:["+r.join(",")+"]"),a.push("types:["+l.join(",")+"]"),a.push("hashTypes:hashTypes")),this.options.data&&a.push("data:data"),a="{"+a.join(",")+"}",n?(this.register("options",a),t.push("options")):t.push(a),t.join(", ")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=t.RESERVED_WORDS={},o=0,a=i.length;a>o;o++)s[i[o]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){if(!e||"string"!=typeof e&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=Handlebars.parse(e),i=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(i,t)},Handlebars.compile=function(e,t){function n(){var n=Handlebars.parse(e),i=(new Handlebars.Compiler).compile(n,t),s=(new Handlebars.JavaScriptCompiler).compile(i,t,void 0,!0);return Handlebars.template(s)}if(!e||"string"!=typeof e&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=n()),i.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var i=this.programs[e];return n?Handlebars.VM.program(t,n):i?i:i=this.programs[e]=Handlebars.VM.program(t)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=e.call(t,Handlebars,n,i.helpers,i.partials,i.data),o=t.compilerInfo||[],a=o[0]||1,r=Handlebars.COMPILER_REVISION;if(a!==r){if(r>a){var l=Handlebars.REVISION_CHANGES[r],p=Handlebars.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+p+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,2);return function(n,s){return s=s||{},e.apply(this,[n,s.data||t].concat(i))}},program:function(e,t){return function(n,i){return i=i||{},e(n,i.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,i,s,o){var a={helpers:i,partials:s,data:o};if(void 0===e)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,a);if(Handlebars.compile)return s[t]=Handlebars.compile(e,{data:void 0!==o}),s[t](n,a);throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,e.handlebars=t}.apply(e,arguments)})}(this),define("core/ef_plugins/panelizr",["jquery","core/global/helpers","core/modules/breakdance","core/global/leadgen","underscore","modernizr","handlebars","libs/jquery.bbq","libs/amplify.core","core/ef_plugins/spinnerhelper"],function(e,t,n,i){!function(e,s,o,a){function r(n,i){switch(this.element=n,this.$element=e(n),this.metadata=this.$element.data("panelizr-options"),this.options=e.extend({},p,i,this.metadata),this._defaults=p,this._name=l,this.isOpen=!1,this.options.useBrowserHistory=t.toBool(this.options.useBrowserHistory)&&Modernizr.history,this.options.ajaxAlwaysReload=t.toBool(this.options.ajaxAlwaysReload),this.options.setInnerWidth=t.toBool(this.options.setInnerWidth),this.options.lightboxAnim=t.toBool(this.options.lightboxAnim),this.options.context=this.options.context.toUpperCase(),this.options.type=this.options.type.toUpperCase(),this.options.type){case"AJAX":case"IFRAME":this.options.context=this.options.context||"ALL";break;case"INLINE":this.options.context=this.options.context||"MOBILE";break;default:throw new Error("whoops, forgot to define a type, exiting now")}this.$main=e(this.options.mainSelector),this.$placeholder=this.$target=this.$panel=this.$panelBody=this.$panelCloseButton=this.$panelOverlay=this.$lightbox=this.$iframe=this.$ctaBody=this.$tcSection=e(),this.target="",this._currentContext="",this.init()}var l="panelizr",p={mainSelector:".panelizr-main",lightboxWidth:"420px",setInnerWidth:!1,type:"",header:"",subheader:"",headerContent:"",panelName:"",panelClasses:"",lightboxAnim:!1,context:"ALL",urlData:{},contextSwitch:480,placeholderElementClass:"panelizr-placeholder",ajaxLoadUrlFragment:"",ajaxLoadCallback:function(){},ajaxAlwaysReload:"false",ajaxPanelLoadHeight:"200px",closeCallback:function(){},useBrowserHistory:"true",ajaxLoadImmediately:"false",iframeHeight:NaN,iframeUrl:"",focusTarget:"",ctaInPanel:!1,ctaUrl:"",ctaClass:"",ctaInMiddle:!1,twoStepExpando:!1,useNewStyling:!1,swipeGallery:!1,includeTcSection:"false"};r.prototype={init:function(){var e=this;e._currentContext=e._getBrowserContext(),e.options.useBrowserHistory=e.options.useBrowserHistory&&e._isMobileContext(),e._isCurrentContextValid()&&(e._setupPanelOrLightbox(),e._setupType(),e._openClickListen(),e._historyListen(),"AJAX"===e.options.type&&"true"===e.options.ajaxLoadImmediately&&e._ajaxLoad()),this._resizeListen()},_getBrowserContext:function(){var e=this,t=s.innerWidth;return t<=e.options.contextSwitch?"MOBILE":"DESKTOP"},_isMobileContext:function(){var e=this;return"MOBILE"===e._currentContext},_isDesktopContext:function(){var e=this;return"DESKTOP"===e._currentContext},_isContextChanged:function(){var e=this;return e._getBrowserContext()!==e._currentContext},_isCurrentContextValid:function(){var e=this;return"ALL"===e.options.context||e._isMobileContext()&&"MOBILE"===e.options.context||e._isDesktopContext()&&"DESKTOP"===e.options.context},_isMobileContextValid:function(){var e=this;return"MOBILE"===e._currentContext&&("ALL"===e.options.context||"MOBILE"===e.options.context)},_isDesktopContextValid:function(){var e=this;return"DESKTOP"===e._currentContext&&("ALL"===e.options.context||"DESKTOP"===e.options.context)},_setupPanelOrLightbox:function(){var e=this;e._isMobileContext()?(e._createPanel(),e.$main.after(e.$panel)):e._isDesktopContext()&&(e._createLightbox(),e.$main.after(e.$lightbox),e._setLightboxWidth(),e._animateLightbox())},_setupType:function(){var e=this;switch(e.options.type.toUpperCase()){case"AJAX":e._ajaxSetup();break;case"INLINE":e._inlineSetup();break;case"IFRAME":e._iframeSetup();break;default:throw new Error("whoops, forgot to define a type, exiting now")}},_resizeListen:function(){var t=this;if(!e("html").hasClass("lt-ie9")){var i=_.debounce(function(){t._isContextChanged()&&(t._close(),t._reset(),t.init())},300);n.register(t.options.contextSwitch,i,i)}},_inlineSetup:function(){var t=this;t.$placeholder=e("<div/>").attr({"class":t.options.placeholderElementClass,style:"display:none;",name:t.options.panelName}),t.target=this.$element.attr("href"),t.$target=e(this.target),t.$target.after(t.$placeholder),t.$target.detach(),t.$panelBody.append(t.$target)},_tcSectionSetup:function(){var t=this,n=e("#tcFormSection");n.detach(),t.$tcSection.append(n)},_ajaxSetup:function(){var e=this;e.options.ajaxLoadCallback&&!_.isFunction(e.options.ajaxLoadCallback)&&(e.options.ajaxLoadCallback=t.getFuncFromString(e.options.ajaxLoadCallback))},_iframeSetup:function(){var t=this;t.options.iframeUrl=t.options.iframeUrl||t.$element.attr("href"),t.$iframe=e("<iframe />",{height:t.options.iframeHeight,width:"100%",frameBorder:"0"}).appendTo(t.$panelBody)},_createPanel:function(){var t,n,i,s,o,r,l=this;t=l.options.ctaInPanel&&""!=l.options.ctaUrl?'<div class="panel panelizr {{noHeaderClass}} {{panelClasses}} {{expandoClass}} {{backgroundStyle}} {{ctaInMiddle}} {{tcSectionClass}}" id="{{panelName}}">                                     <header class="panel-header {{noSubheaderClass}}">                                         {{#headerText}} <h1>{{this}}</h1> {{/headerText}}                                         {{#subheaderText}} <h2>{{this}}</h2> {{/subheaderText}}                                         {{#headerContent}} <div class="panel-header-content">{{this}}</div> {{/headerContent}}                                         {{#tcSection}} <div class="panel-tour-consultant-section"></div> {{/tcSection}}                                         <a href="#" class="panel-close" id="panel-close">X</a>                                     </header>                                     <div class="panel-body" id="{{panelName}}-body"></div>                                     <div class="cta-body"></div>                                 </div>':'<div class="panel panelizr {{noHeaderClass}} {{panelClasses}} {{expandoClass}} {{backgroundStyle}} {{tcSectionClass}}" id="{{panelName}}">                                     <header class="panel-header {{noSubheaderClass}}">                                         {{#headerText}} <h1>{{this}}</h1> {{/headerText}}                                         {{#subheaderText}} <h2>{{this}}</h2> {{/subheaderText}}                                         {{#headerContent}} <div class="panel-header-content">{{this}}</div> {{/headerContent}}                                         {{#tcSection}} <div class="panel-tour-consultant-section">{{this}}</div> {{/tcSection}}                                         <a href="#" class="panel-close" id="panel-close">X</a>                                     </header>                                     <div class="panel-body" id="{{panelName}}-body"></div>                                 </div>',n=""==l.options.header&&""==l.options.subheader?"no-header":"",i=""==l.options.subheader?"no-subheader":"",s={noHeaderClass:n,noSubheaderClass:i,headerText:""!=l.options.header?l.options.header:a,subheaderText:""!=l.options.subheader?l.options.subheader:a,headerContent:e(l.options.headerContent).html(),tcSection:"true"==l.options.includeTcSection?"":a,tcSectionClass:"true"==l.options.includeTcSection?"has-tc-section":a,panelName:l.options.panelName,panelClasses:l.options.panelClasses,platform:l.options._currentContext,expandoClass:l.options.twoStepExpando?"expando-form":a,backgroundStyle:l.options.useNewStyling?"with-background":a,ctaInMiddle:l.options.ctaInMiddle?"cta-in-middle":a},o=Handlebars.compile(t),r=o(s),l.$panel=e(r).hide(),l.$panelBody=l.$panel.find(".panel-body"),l.$panelCloseButton=l.$panel.find("#panel-close"),l.$ctaBody=l.$panel.find(".cta-body"),l.$tcSection=l.$panel.find(".panel-tour-consultant-section"),"true"==l.options.includeTcSection&&l._tcSectionSetup(),l._closeClickListen()},_createLightbox:function(){var t,n,i,s,o,r,l=this;t=l.options.ctaInPanel&&""!=l.options.ctaUrl?'<div class="lightbox-overlay panelizr-lightbox panelizr-{{panelizrType}}" id="{{panelName}}-lightbox">                                     <div class="lightbox-content panel panelizr {{noHeaderClass}} {{panelClasses}} {{expandoClass}} {{backgroundStyle}} {{tcSectionClass}}" id="{{panelName}}">                                         <header class="panel-header lightbox-header {{noSubheaderClass}}">                                             {{#headerText}} <h1>{{this}}</h1> {{/headerText}}                                             {{#subheaderText}} <h2>{{this}}</h2> {{/subheaderText}}                                             {{#headerContent}} <div class="panel-header-content">{{this}}</div> {{/headerContent}}                                             {{#tcSection}} <div class="panel-tour-consultant-section">{{this}}</div> {{/tcSection}}                                             <a href="#" class="lightbox-close" id="lightbox-close">X</a>                                         </header>                                         <div class="panel-body lightbox-body" id="{{panelName}}-body"></div>                                         <div class="cta-body"></div>                                     </div>                                 </div>':'<div class="lightbox-overlay panelizr-lightbox panelizr-{{panelizrType}}" id="{{panelName}}-lightbox">                                     <div class="lightbox-content panel panelizr {{noHeaderClass}} {{panelClasses}} {{expandoClass}} {{backgroundStyle}} {{tcSectionClass}}" id="{{panelName}}">                                         <header class="panel-header lightbox-header {{noSubheaderClass}}">                                             {{#headerText}} <h1>{{this}}</h1> {{/headerText}}                                             {{#subheaderText}} <h2>{{this}}</h2> {{/subheaderText}}                                             {{#headerContent}} <div class="panel-header-content">{{this}}</div> {{/headerContent}}                                             {{#tcSection}} <div class="panel-tour-consultant-section">{{this}}</div> {{/tcSection}}                                             <a href="#" class="lightbox-close" id="lightbox-close">X</a>                                         </header>                                         <div class="panel-body lightbox-body" id="{{panelName}}-body"></div>                                     </div>                                 </div>',n=""==l.options.header&&""==l.options.subheader?"no-header":"",i=""==l.options.subheader?"no-subheader":"",s={noHeaderClass:n,noSubheaderClass:i,headerText:""!=l.options.header?l.options.header:a,subheaderText:""!=l.options.subheader?l.options.subheader:a,headerContent:e(l.options.headerContent).html(),tcSection:"true"==l.options.includeTcSection?"":a,tcSectionClass:"true"==l.options.includeTcSection?"has-tc-section":a,panelName:l.options.panelName,panelizrType:l.options.type.toLowerCase(),panelClasses:l.options.panelClasses,platform:l.options._currentContext,expandoClass:"true"==l.options.twoStepExpando?"expando-form":a,backgroundStyle:"true"==l.options.useNewStyling?"with-background":a},o=Handlebars.compile(t),r=o(s),l.$lightbox=e(r).hide(),l.$panel=l.$lightbox.find(".panel"),l.$panelBody=l.$panel.find(".panel-body"),l.$panelCloseButton=l.$panel.find("#lightbox-close"),l.$panelOverlay=l.$lightbox.closest(".lightbox-overlay"),l.$ctaBody=l.$panel.find(".cta-body"),l.$tcSection=l.$panel.find(".panel-tour-consultant-section"),"true"==l.options.includeTcSection&&l._tcSectionSetup(),l._closeClickListen(),l._animateLightbox()},_ctaListener:function(t,n){var i=this,s=i.$panelBody.find(".panel-expand-cta[data-attribute-cta="+t+"]");s.hasClass("listening")||(s.addClass("listening"),s.click(function(){e(this).toggleClass("is-active"),n?e(this).next(".cta-body").slideToggle():e(this).closest(".panel-body").next(".cta-body").slideToggle()}))},_setLightboxWidth:function(){var e=this;e.$panel.width(e.options.lightboxWidth),e.options.setInnerWidth&&e.$panel.css("width","+="+e.$panelBody.css("padding-left")).css("width","+="+e.$panelBody.css("padding-right"))},_animateLightbox:function(){var e=this;e.options.lightboxAnim&&e.$panelOverlay.addClass("lightbox-anim")},_closeClickListen:function(){var t=this;t.$panelCloseButton.on("click.panelizr."+t.options.panelName,function(e){e.preventDefault(),t.close()}),t.$lightbox.length>0&&t.$panelOverlay.on("click.panelizr."+t.options.panelName,function(n){
e(n.target).hasClass("lightbox-overlay")&&t.close()}),e(o).on("keydown.panelizr."+t.options.panelName,function(e){27===e.keyCode&&t.close()})},_openClickListen:function(){var e=this;e.$element.on("click.panelizr."+e.options.panelName,function(t){o.documentElement.clientWidth<e.$panel.outerWidth()||(t.preventDefault(),e.open(!0))})},_historyListen:function(){var t=this;t.options.useBrowserHistory&&e(s).on("popstate.panelizr."+t.options.panelName,function(e){if(e.preventDefault(),e.originalEvent.state&&e.originalEvent.state.panelizr&&e.originalEvent.state.panelizr.panelName===t.options.panelName)switch(e.originalEvent.state.panelizr.action){case"open":t.open(!1);break;case"close":t._close(e.originalEvent.state.panelizr.scrollTo)}})},open:function(t){var n,i=this;if(t="undefined"!=typeof t?t:!0,!i.isOpen){t&&i.options.useBrowserHistory&&(history.replaceState({panelizr:{panelName:i.options.panelName,action:"close",scrollTo:e(s).scrollTop()}},""),history.pushState({panelizr:{panelName:i.options.panelName,action:"open"}},"")),i.options.focusTarget&&setTimeout(function(){var e=i.$panel.find(i.options.focusTarget).first();e.focus(),e.select()},20),i._isMobileContextValid()?(i.$panel.show(0,function(){s.scrollTo(0,1)}),i.$main.hide()):i._isDesktopContextValid()&&(i.$lightbox.show(),n=_.isNull(s.pageYOffset)||_.isUndefined(s.pageYOffset)?s.document.documentElement.scrollTop:s.pageYOffset,i.$panel.css("margin-top",n+20+"px")),i.options.ctaInPanel&&""!=i.options.ctaUrl&&"INLINE"==i.options.type&&i._ctaLoad(),("AJAX"===i.options.type&&"true"!==i.options.ajaxLoadImmediately||"true"===i.options.swipeGallery)&&i._ajaxLoad(),"IFRAME"===i.options.type&&i.$iframe.attr("src",e.param.querystring(i.options.iframeUrl,i.options.urlData));var o=e("#tour-consultant-container");0!==o.length&&o.hide(),i.isOpen=!0,amplify.publish("modal/open");var a=i.$panel.attr("id");dataLayer.push({event:"load",context:a,pageType:"virtual"})}},_ajaxLoad:function(t){var n,s,o=this,a=o.$panel.data("panelizr-ajax-panel")||{loadStatus:"",panelName:o.options.panelName};("started"!==a.loadStatus&&"complete"!==a.loadStatus||o.options.ajaxAlwaysReload&&!o.options.ajaxLoadImmediately)&&(o.$panelBody.empty(),o.$panelBody.height(o.options.ajaxPanelLoadHeight),s=o._isMobileContext()?o.$panelBody.spinnerhelper({type:"inline",delay:0,spinOpts:{lines:11,width:3,scale:.5,top:"17%"}}).data("plugin_spinnerhelper"):o.$panelBody.spinnerhelper({type:"inline",delay:0}).data("plugin_spinnerhelper"),a.loadStatus="started",o.$panel.data("panelizr-ajax-panel",a),n=e.param.querystring(o.$element.attr("href"),o.options.urlData),n=o.options.ajaxLoadUrlFragment?n+" "+o.options.ajaxLoadUrlFragment:n,o.$panelBody.load(n,function(t,n,r){switch(o.options.ctaInPanel&&""!=o.options.ctaUrl&&o._ctaLoad(),s.destroy(),o.$panelBody.height("auto"),n){case"success":a.loadStatus="complete",o.options.ajaxLoadCallback(o.$panel,t,n,r,o.options.ctaInPanel),amplify.publish("panelizr/ajaxLoadComplete"),o.options.twoStepExpando&&i.expandoForm(),o.options.swipeGallery&&(a.loadStatus="",EFTOURS.gallery.galleryInit(o.$panel,t,n,r));break;case"error":case"timeout":case"abort":case"parsererror":a.loadStatus="error",e("body").hasClass("ETFC")?o.$panelBody.text("Oups, une erreur sest produite. Merci de ressayer un peu plus tard."):o.$panelBody.text("Oops, there has been an error. Please try again later")}o.$panel.data("panelizr-ajax-panel",a)}))},_ctaLoad:function(t){var n,i=this,s=i.$panel.data("panelizr-ajax-panel")||{loadStatus:"",panelName:i.options.panelName};i.$ctaBody.empty(),i.$ctaBody.height(i.options.ajaxPanelLoadHeight),s.loadStatus="started",n=i.options.ctaUrl;var o=e(i.$panelBody).find(".panel-expand-cta");i.options.ctaInMiddle&&i.$ctaBody.detach().insertAfter(o),i._ctaListener(o.attr("data-attribute-cta"),i.options.ctaInMiddle),i.$ctaBody.load(n,function(t,n,o){switch(i.$ctaBody.height("auto"),n){case"success":s.loadStatus="complete",EFTOURS.leadforms.leadFormInit(i.$panel,t,n,o,i.options.ctaInPanel),amplify.publish("panelizr/ajaxLoadComplete");break;case"error":case"timeout":case"abort":case"parsererror":s.loadStatus="error",e("body").hasClass("ETFC")?i.$ctaBody.text("Oups, une erreur sest produite. Merci de ressayer un peu plus tard."):i.$panelBody.text("Oops, there has been an error. Please try again later")}i.$panel.data("panelizr-ajax-panel",s)})},close:function(){var e=this;e.isOpen&&(e.options.useBrowserHistory?history.go(-1):e._close(0))},_close:function(n){var i=this;if(i.isOpen){i.options.ajaxAlwaysReload&&!i.options.ajaxLoadImmediately&&(i.options.ctaInPanel&&""!=i.options.ctaUrl?i.$ctaBody.empty():i.$panelBody.empty()),i._isMobileContextValid()?(i.$main.show(),i.$panel.hide(0,function(){e(s).scrollTop(n)})):i._isDesktopContextValid()&&i.$lightbox.hide(),i.options.ctaInPanel&&""!=i.options.ctaUrl&&e(i.$ctaBody).hide();var o=e("#tour-consultant-container");0!==o.length&&o.show(),dataLayer.push({event:"click",action:"close",pageType:""}),i.isOpen=!1,i.options.closeCallback&&!_.isFunction(i.options.closeCallback)&&(i.options.closeCallback=t.getFuncFromString(i.options.closeCallback)),i.options.closeCallback(),i.options.swipeGallery&&EFTOURS.gallery.galleryClose(),amplify.publish("modal/close")}},_reset:function(){var t=this;t.isOpen&&(t.options.useBrowserHistory?history.go(-1):t._close(0)),t.options.useBrowserHistory||e(s).off("popstate.panelizr."+t.options.panelName),t.$element.off("click.panelizr."+t.options.panelName),t.$panelCloseButton.off("click.panelizr."+t.options.panelName),"INLINE"===t.options.type&&(t.$target.detach().insertAfter(t.$placeholder),t.$placeholder.remove()),t.$panel.length>0&&t.$panel.remove(),t.$lightbox.length>0&&t.$lightbox.remove()},destroy:function(){var e=this;e._reset(),e.$element.removeData("plugin_"+l)}},e.fn[l]=function(t){return this.each(function(){e.data(this,"plugin_"+l)||e.data(this,"plugin_"+l,new r(this,t))})}}(e,window,document)}),define("core/modules/panelizr",["require","jquery","core/wfm/leadforms","core/ef_plugins/panelizr"],function(e,t){return console.log("panelizr"),{init:function(){t(".panelizr-link").panelizr(),t(".panelizr-trigger").on("click",function(e){e.preventDefault();var n=t(this).attr("href"),i=t(n);i.click()})}}}),define("core/ef_plugins/disruptr",["jquery","core/global/helpers","underscore","libs/jquery.cookie"],function(e,t){!function(e,n,i,s){function o(n,i){this.element=n,this.$element=e(n),this.metadata=this.$element.data("disruptr-options"),this.options=e.extend({},p,i,this.metadata),this._defaults=p,this._name=l,this.options.startTimerOnInit=t.toBool(this.options.startTimerOnInit),this.isOpen=!1,this.viewCount=0,this.disable=!0,this.hasOpened=!1,this.init()}function a(e){this.plugin=e}function r(e){this.plugin=e}var l="disruptr",p={seconds:8,startTimerOnInit:!0,panelizrLink:"",sessionCookieName:"disruptedThisSession",longTermCookieName:"disruptedLongTerm",countKeyName:"Count",disableKeyName:"Disable",maxViewCount:2,openCallback:function(){},isMobile:!1,showDisruptr:!1};o.prototype={init:function(){var e=this;return e.options.openCallback&&!_.isFunction(e.options.openCallback)&&(e.options.openCallback=t.getFuncFromString(e.options.openCallback)),e.options.longTermCookieName&&(e.viewCount=e.readCookie(e.options.longTermCookieName,e.options.countKeyName),e.disable=e.readCookie(e.options.longTermCookieName,e.options.disableKeyName)),e.viewCount>=e.options.maxViewCount||e.hasSubmittedFormOrLogin()||"0"===e.facebookFormLink("hb")?void e.destroy():(this.timer=new a(e),void(e.options.startTimerOnInit&&e.timer.start()))},hasSubmittedFormOrLogin:function(){var e=this;return e.disable=e.readCookie(e.options.longTermCookieName,e.options.disableKeyName),1==e.disable},facebookFormLink:function(e){for(var t=n.location.search.substring(1),i=t.split("&"),s=0;s<i.length;s++){var o=i[s].split("=");if(o[0]==e)return o[1]}return!1},open:function(){var t=this;this.showMobile()?(this.mobilizr=new r(t),t.mobilizr.init()):t.options.panelizrLink&&e(t.options.panelizrLink).click(),t.options.openCallback(),t.setCookies(),t.hasOpened=!0},showMobile:function(){return this.options.showDisruptr},readCookie:function(t,n){var i,s,o,a=this;if(!t||"string"!=typeof t||!n)return!1;if(e.cookie.raw=!0,o=e.cookie(t),e.cookie.raw=!1,o&&(s=a.deparamCookieToObj(o),i=s[n]),isNaN(i)){if("true"===i)return!0;switch(n){case this.options.countKeyName:i=0;break;case this.options.disableKeyName:i=!1;break;default:i=!1}}return i},deparamCookieToObj:function(e){for(var t={},n=e.split("&"),i=0;i<n.length;i++){var s=n[i].split("=");if(s[0]=decodeURIComponent(s[0]),s[1]=decodeURIComponent(s[1]),"undefined"==typeof t[s[0]])t[s[0]]=s[1];else if("string"==typeof t[s[0]]){var o=[t[s[0]],s[1]];t[s[0]]=o}else t[s[0]].push(s[1])}return t},setCookies:function(){var t=i.domain.toString(),n=t.split("."),s="."+n[n.length-2]+"."+n[n.length-1],o=this;if(o.viewCount<o.options.maxViewCount&&o.viewCount++,e.cookie.raw=!0,e.cookie(o.options.sessionCookieName,"true",{path:"/",domain:s}),""!==o.options.longTermCookieName){var a="Count="+o.viewCount+"&Disable="+o.disable;e.cookie(o.options.longTermCookieName,a,{expires:180,path:"/",domain:s})}e.cookie.raw=!1},destroy:function(){var e=this;"object"==typeof e.timer&&"function"==typeof e.timer.stop&&e.timer.stop(),e.$element.removeData("plugin_"+l)}},e.fn[l]=function(t){return this.each(function(){e.data(this,"plugin_"+l)||e.data(this,"plugin_"+l,new o(this,t))})},a.prototype={timeout:null,running:!1,wasStarted:!1,plugin:{},start:function(e){var t=this,i=this.plugin;return t.running?!1:e!==!0||t.wasStarted?(t.timeout=n.setTimeout(function(){i.hasOpened||i.hasSubmittedFormOrLogin()||(i.open(),t.running=!1)},1e3*i.options.seconds),t.running=!0,t.wasStarted=!0,!0):!1},stop:function(){var e=this;return e.running?(n.clearTimeout(e.timeout),e.running=!1,!0):!1}},r.prototype={init:function(){var t=this.plugin,n=e(".bottom-slide-bar"),i=e(".bottom-slide-bar #opt-in"),s=e(".bottom-slide-bar #opt-out"),o=n.outerHeight();n.css({bottom:"-"+o+"px",display:"block"}).animate({bottom:"0"}),i.click(function(){t.options.panelizrLink&&(e(t.options.panelizrLink).click(),n.remove())}),s.click(function(){n.remove()})}}}(e,window,document)}),define("core/modules/hoverbox",["jquery","core/global/helpers","core/modules/panelizr","core/ef_plugins/disruptr","libs/amplify.core"],function(e,t,n){return{init:function(i,s){var o,a,r,l,p,c=e("body"),h=t.toBool(i);if(console.log("hoverbox"),window.EFTOURS=window.EFTOURS||{},window.EFTOURS.globalState=window.EFTOURS.globalState||{},p=1==window.EFTOURS.globalState.isPricedTour,p!=h)return!0;if(n.init(),o=c.disruptr(s).data("plugin_disruptr"),c.on("focus","input",function(){void 0!=o&&void 0!=o.timer&&o.timer.stop()}),c.on("blur","input",function(){if(o.hasSubmittedFormOrLogin())return void o.destroy();r=[],e(".panelizr-link").each(function(){e(this).data("plugin_panelizr")&&r.push(e(this).data("plugin_panelizr"))});for(var t=0;t<r.length;t++)if(r[t].isOpen&&void 0!=o)return void o.timer.stop();e(document.activeElement).is("input")||o.timer.start(!0)}),amplify.subscribe("mediaframework/playing",function(){o.timer.stop()}),amplify.subscribe("mediaframework/paused",function(){o.timer.start(!0)}),amplify.subscribe("mediaframework/played",function(){o.timer.start(!0)}),h){a=e("#disruptr-panelizr").data("plugin_panelizr"),l={departMonth:"travelMonth",departYear:"travelYear",departCity:"departureCity",departGate:"departureGateway"},amplify.subscribe("price/load",function(e){a.options.urlData=t.mapKeys(e,l)});var u=_.once(function(){void 0!=o&&void 0!=o.timer&&(o.timer.start(),amplify.subscribe("modal/open",function(){o.timer.stop()}),amplify.subscribe("modal/close",function(){o.timer.start(!0)}))});amplify.subscribe("price/quote",function(e){a.options.urlData=t.mapKeys(e,l),u()})}else{var d=_.once(function(){void 0!=o&&void 0!=o.timer&&(o.timer.start(),amplify.subscribe("modal/open",function(){o.timer.stop()}),amplify.subscribe("modal/close",function(){o.timer.start(!0)}))});d()}return o}}});
//# sourceMappingURL=hoverbox.js.map