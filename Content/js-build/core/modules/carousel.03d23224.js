(function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,o=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),o="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&-1===e(s[n],i)&&s[n].push(o?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,o=this.getListenersAsObject(t);for(s in o)o.hasOwnProperty(s)&&(n=e(o[s],i),-1!==n&&o[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)o.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?o.call(this,n,s):r.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,o,r=this.getListenersAsObject(t);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].length;n--;)i=r[s][n],i.once===!0&&this.removeListener(t,i.listener),o=i.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var o={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",o):t.eventie=o}(this),function(t,e){"function"==typeof define&&define.amd?define("libs/jquery.imagesloaded",["jquery","eventEmitter/EventEmitter","eventie/eventie"],function(i,n,s){return e(t,n,s,i)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i,n){function s(t,e){for(var i in e)t[i]=e[i];return t}function o(t){return"[object Array]"===u.call(t)}function r(t){var e=[];if(o(t))e=t;else if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e}function h(t,e,i){if(!(this instanceof h))return new h(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=s({},this.options),"function"==typeof e?i=e:s(this.options,e),i&&this.on("always",i),this.getImages(),n&&(this.jqDeferred=new n.Deferred);var o=this;setTimeout(function(){o.check()})}function a(t){this.img=t}function l(t){this.src=t,p[t]=this}var d=t.console,c="undefined"!=typeof d,u=Object.prototype.toString;h.prototype=new e,h.prototype.options={},h.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var s=i.querySelectorAll("img"),o=0,r=s.length;r>o;o++){var h=s[o];this.addImage(h)}}},h.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},h.prototype.check=function(){function t(t,s){return e.options.debug&&c&&d.log("confirm",t,s),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var s=0;n>s;s++){var o=this.images[s];o.on("confirm",t),o.check()}},h.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},h.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},n&&(n.fn.imagesLoaded=function(t,e){var i=new h(this,t,e);return i.jqDeferred.promise(n(this))}),a.prototype=new e,a.prototype.check=function(){var t=p[this.img.src]||new l(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return l.prototype=new e,l.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},l.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},h}),define("core/ef_plugins/equalheight",["jquery","core/global/state","underscore","libs/jquery.imagesloaded"],function(t,e,i){!function(t,n,s,o){function r(e,i){this.element=e,this.$element=t(e),this.metadata=this.$element.data("equalheight-options"),this.options=t.extend({},a,i,this.metadata),this._defaults=a,this._name=h,this.init()}var h="equalheight",a={refreshTime:100,childSelector:""};r.prototype={init:function(){function s(){e.getBreakpoint()<640&&t(".content-list-from-carousel").is(".list")?h.setListToAutoHeight():h.updateCardHeights()}var o,r,h=this;r=i.debounce(s,200),o=t(h.element).imagesLoaded(function(){s()}),t("html").hasClass("lt-ie9")||t(n).on("resize.equalheight",function(){r()})},setListToAutoHeight:function(){var e=this,i=t(e.options.childSelector);i.css("height","auto")},updateCardHeights:function(){var e,i,n,s,o=this,r=0,h=0;if(e=""===o.options.childSelector?o.$element.children().get():o.$element.children(o.options.childSelector).get(),0===e.length)return!1;for(n=e.length;n--;)i=e[n],i.style.height="auto";for(n=e.length;n--;)i=e[n],s=t(i),h="border-box"==s.css("box-sizing")?s.outerHeight():s.height(),h>r&&(r=h);for(n=e.length;n--;)i=e[n],i.style.height=r+"px";return!0},destroy:function(){var e=this;t("html").hasClass("lt-ie9")||t(n).off("resize.equalheight"),e.$element.children().height(""),e.$element.removeData("plugin_"+h)}},t.fn[h]=function(e){return this.each(function(){t.data(this,"plugin_"+h)||t.data(this,"plugin_"+h,new r(this,e))})}}(t,window,document)}),define("core/modules/contentList",["jquery","core/ef_plugins/equalheight"],function(t){return console.log("contentList"),{init:function(){var e=t(".content-list").data("plugin_equalheight");void 0==e?t(".content-list").equalheight({childSelector:".content-list-item"}):e.updateHeight()}}}),define("core/ef_plugins/swipe",["jquery"],function(t){console.log("swipe"),window.Swipe=function(t,e){if(!t)return null;return this.browser={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in e)if(void 0!==t.style[e[i]])return!0;return!1}(document.createElement("swipe"))},this.options=e||{},this.index=this.options.startSlide||0,this.speed=this.options.speed||300,this.callback=this.options.callback||function(){},this.delay=this.options.auto||0,this.peek=this.options.peek||"true"===t.getAttribute("data-swipe-peek")||!1,this.peekSlideWidth=.85,this.peekSlideSpacing=15,this.maxSlideWidth=350,this.positionIndicator=this.options.positionIndicator||"true"===t.getAttribute("data-swipe-position-indicator")||!1,this.positionIndicatorChar="â€¢",this.positionCounter=this.options.counter||"true"===t.getAttribute("data-swipe-position-counter")||!1,this.positionCounterSpacer=this.options.positionCounterSpacer||t.getAttribute("data-swipe-position-counter-spacer")||" of ",this.arrows=this.options.arrows||"true"===t.getAttribute("data-swipe-arrows")||!1,this.arrowHolder=this.options.arrowHolder||null,this.arrowsToEdge=this.options.arrowsToEdge,this.arrowsToEdgeCutoff=this.options.arrowsToEdgeCutoff||580,this.container=t,this.element=this.container.children[0],this.element.style.listStyle="none",this.element.style.margin=0,this.slides=this.element.children,this.length=this.slides.length,this.length<2?null:((this.positionIndicator||this.positionCounter||this.arrows)&&this.setupNav(),this.setup(),this.begin(),void(this.browser.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1))))},Swipe.prototype={setup:function(){if(this.containerWidth=this.container.getBoundingClientRect().width||this.container.offsetWidth,!this.containerWidth)return null;this.container.style.visibility="hidden",this.slideWidth=this.peek?this.containerWidth*this.peekSlideWidth:this.containerWidth,this.slideWidth=this.slideWidth>this.maxSlideWidth?this.maxSlideWidth:this.slideWidth,this.slideSpacing=this.peek?this.peekSlideSpacing:0,this.elementWidth=this.slides.length*(this.slideWidth+this.slideSpacing),this.element.style.width=this.elementWidth+"px",this.element.style.paddingLeft=this.slideSpacing+"px",this.element.style.paddingRight=this.slideSpacing+"px",this.element.style.paddingTop=0,this.element.style.paddingBottom=0,this.width=this.slideWidth+this.slideSpacing;for(var e,i=this.length;i--;)e=this.slides[i],e.style.width=this.slideWidth+"px",i!=this.length-1&&(e.style.marginRight=this.slideSpacing+"px"),e.style.display="block",e.style.styleFloat="left",e.style.cssFloat="left";this.slide(this.index,0),this.container.style.visibility="visible",this.arrows&&this.arrowsToEdge&&t(window).width()>this.arrowsToEdgeCutoff?this.setupArrowsToEdge():this.teardownArrowsToEdge()},hasOrientationChanged:function(t){var e=t.orientation;t.matchMedia("(orientation: portrait)").matches&&"portrait"!==e&&(t.orientation="portrait",console.log(t.orientation),this.setup()),t.matchMedia("(orientation: landscape)").matches&&"landscape"!==e&&(t.orientation="landscape",console.log(t.orientation),this.setup())},setupNav:function(){return this.slides=this.element.children,this.length=this.slides.length,this.length<2?null:(this.nav=document.createElement("div"),this.nav.setAttribute("class","swipe-nav"),this.arrowHolder||(this.arrowHolder=this.nav),this.arrows&&(this.setupArrows(),this.arrowHolder.appendChild(this.prevArrow),this.arrowHolder.appendChild(this.nextArrow)),this.positionIndicator&&(this.setupPositioner(),this.nav.appendChild(this.positioner)),this.positionCounter&&(this.setupCounter(),this.nav.appendChild(this.counter)),void this.container.appendChild(this.nav))},updateNav:function(t){this.positionIndicator&&this.setPositionerPosition(t),this.positionCounter&&this.setCounterPosition(t),this.arrows&&this.updateArrows(t)},setupArrows:function(){var t=this;this.nextArrow=document.createElement("a"),this.nextArrow.setAttribute("class","swipe-next-arrow"),this.nextArrow.appendChild(document.createTextNode(">")),this.nextArrow.onclick=function(){t.next()},this.prevArrow=document.createElement("a"),this.prevArrow.setAttribute("class","swipe-prev-arrow"),this.prevArrow.appendChild(document.createTextNode("<")),this.prevArrow.onclick=function(){t.prev()},this.updateArrows(this.index)},updateArrows:function(t){0==t?(this.prevArrow.style.visibility="hidden",this.nextArrow.style.visibility="visible"):t==this.length-1?(this.prevArrow.style.visibility="visible",this.nextArrow.style.visibility="hidden"):(this.prevArrow.style.visibility="visible",this.nextArrow.style.visibility="visible")},setupCounter:function(){this.counter=document.createElement("div"),this.counter.setAttribute("class","swipe-counter"),this.counter.current=document.createElement("span"),this.counter.current.setAttribute("class","swipe-counter-current"),this.counter.current.appendChild(document.createTextNode(this.index+1)),this.counter.spacer=document.createElement("span"),this.counter.spacer.setAttribute("class","swipe-counter-spacer"),this.counter.spacer.appendChild(document.createTextNode(this.positionCounterSpacer)),this.counter.total=document.createElement("span"),this.counter.total.setAttribute("class","swipe-counter-total"),this.counter.total.appendChild(document.createTextNode(this.length)),this.counter.appendChild(this.counter.current),this.counter.appendChild(this.counter.spacer),this.counter.appendChild(this.counter.total)},setCounterPosition:function(t){this.counter.current.removeChild(this.counter.current.firstChild),this.counter.current.appendChild(document.createTextNode(t+1))},setupPositioner:function(){this.positioner=document.createElement("div"),this.positioner.setAttribute("class","swipe-position");for(var t=this.length,e=this;t--;){var i=document.createElement("span"),n=document.createTextNode(this.positionIndicatorChar);i.appendChild(n),i.addEventListener("click",function(t){var i=this.parentNode.childNodes,n=Array.prototype.indexOf.call(i,this);e.gotoSlide(n)},!1),this.positioner.appendChild(i)}this.setPositionerPosition(this.index)},setPositionerPosition:function(t){for(var e=this.positioner.children,i=e.length;i--;)e[i].className=" ";e[t].className="swipe-position-current"},setupArrowsToEdge:function(){var e=-1*Math.ceil(t(window).width()-t(this.arrowHolder).outerWidth()-t(this.arrowHolder).offset().left),i=-1*Math.ceil(t(this.arrowHolder).offset().left);t(this.nextArrow).css("right",e+"px"),t(this.prevArrow).css("left",i+"px"),t(this.arrowHolder).addClass("swipe-arrows-to-edge")},teardownArrowsToEdge:function(){this.arrows&&(t(this.nextArrow).css("right",""),t(this.prevArrow).css("left",""),t(this.arrowHolder).removeClass("swipe-arrows-to-edge"))},slide:function(t,e){var i=this.element.style;void 0==e&&(e=this.speed),i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=e+"ms";var n=t*this.width,s=this.elementWidth-this.containerWidth+this.slideSpacing;n>s&&(n=s),i.MozTransform=i.webkitTransform="translate3d("+-n+"px,0,0)",i.msTransform=i.OTransform="translateX("+-n+"px)",this.browser.transitions||(this.element.style.marginLeft=-n+"px"),this.index=t,(this.positionIndicator||this.positionCounter||this.arrows)&&this.updateNav(t)},getPos:function(){return this.index},prev:function(t){this.delay=t||0,clearTimeout(this.interval),this.index&&this.slide(this.index-1,this.speed)},next:function(t){this.delay=t||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},gotoSlide:function(t,e){this.delay=e||0,clearTimeout(this.interval),t>=0&&t<this.length&&t!=this.index&&this.slide(t,this.speed)},begin:function(){var t=this;this.interval=this.delay?setTimeout(function(){t.next(t.delay)},this.delay):0},stop:function(){this.delay=0,clearTimeout(this.interval)},resume:function(){this.delay=this.options.auto||0,this.begin()},handleEvent:function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(t);break;case"resize":this.hasOrientationChanged(window)}},transitionEnd:function(t){this.delay&&this.begin(),this.callback(t,this.index,this.slides[this.index])},onTouchStart:function(t){this.start={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,time:Number(new Date)},this.isScrolling=void 0,this.deltaX=0,this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=0,t.stopPropagation()},onTouchMove:function(t){t.touches.length>1||t.scale&&1!==t.scale||(this.deltaX=t.touches[0].pageX-this.start.pageX,"undefined"==typeof this.isScrolling&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(t.touches[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),clearTimeout(this.interval),this.deltaX=this.deltaX/(!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?Math.abs(this.deltaX)/this.width+1:1),this.element.style.MozTransform=this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)",t.stopPropagation()))},onTouchEnd:function(t){var e=Number(new Date)-this.start.time<250&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.slide(this.index+(e&&!i?this.deltaX<0?1:-1:0),this.speed),t.stopPropagation()},kill:function(){this.stop(),this.element.style.width="",this.element.style.padding="",this.element.style.left="",this.element.style.listStyle="",this.element.style.margin="",this.browser.transitions&&(this.element.style.MozTransform=this.element.style.webkitTransform="translate3d(0,0,0)",this.element.style.msTransform=this.element.style.OTransform="translateX(0)");for(var e=this.slides.length;e--;){var i=this.slides[e];i.style.width="",i.style.height="",i.style.marginRight="",i.style.left="",i.style.styleFloat="",i.style.cssFloat="",i.style.display="",this.browser.transitions&&(i.style.MozTransform=i.style.webkitTransform="translate3d(0,0,0)",i.style.msTransform=i.style.OTransform="translateX(0)")}this.browser.addEventListener?(this.element.removeEventListener("touchstart",this,!1),this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1),this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("msTransitionEnd",this,!1),this.element.removeEventListener("oTransitionEnd",this,!1),this.element.removeEventListener("otransitionend",this,!1),this.element.removeEventListener("transitionend",this,!1),window.removeEventListener("resize",this,!1)):window.onresize=null,this.nav&&this.nav.parentNode.removeChild(this.nav),t(this.container).data("Swipe",null)}},t.fn.Swipe=function(e){return this.each(function(){var i=t(this);i.data("Swipe",new Swipe(i[0],e))})}}),define("core/modules/carousel",["jquery","core/global/state","libs/enquire","core/modules/contentList","core/ef_plugins/swipe"],function(t,e,i,n){return{init:function(){if(console.log("carousel"),e.oldIe())n.init();else{var s=t("#from-carousel.carousel");i.register("screen and (max-width : 640px)",{match:function(){plugin=s.data("Swipe"),plugin||s.Swipe({callback:function(t,e,i){dataLayer.push({event:"swipe",context:"Carousel",position:e+1})}})},unmatch:function(){plugin=s.data("Swipe"),plugin&&plugin.kill()}}),n.init()}}}});
//# sourceMappingURL=carousel.js.map