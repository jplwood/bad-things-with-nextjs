define("core/ef_plugins/truncatr",["jquery"],function(t){!function(t,e,n,r){function i(e,n){this.element=e,this.$element=t(e),this.metadata=this.$element.data("truncatr-options"),this.options=t.extend({},p,n,this.metadata),this._defaults=p,this._name=a,this.init()}var a="truncatr",p={maxLength:85,fullWrapper:'<div class="truncatr-full" />',excerptWrapper:'<div class="truncatr-excerpt" />',ending:"..."};i.prototype={init:function(){var e,n=this,r=n.$element;return e=r.children().not("br, p").detach(),n._wrapTextWithP(r),n._sanitize(r),r.text().length<=n.options.maxLength?void n.destroy():(n.$excerpt=t(n.options.excerptWrapper).append(n._createExcerpt(r)),n.$full=t(n.options.fullWrapper).append(r.children()),void r.html("").append(n.$full,n.$excerpt,e))},truncate:function(t,e,n){var r="",i=" ",a=[",",".","!","?"],p=-1;if(0===e)return"";if(t.length<=e)return t;r=t.substring(0,e-n.length),p=r.lastIndexOf(i),-1!==p&&(r=r.slice(0,p));for(var o=0;o<a.length;o++)if(r.charAt(r.length-1)===a[o]){r=r.substring(0,r.length-1);break}return r+=n},_createExcerpt:function(e){var n=this,r=e.find("p").first().text(),i=t("<p />");return i.text(n.truncate(r,n.options.maxLength,n.options.ending))},_sanitize:function(e){e.find("p").each(function(){var e=t(this),n=t.trim(e.html());(""===n||"&nbsp;"===n)&&e.remove()})},_wrapTextWithP:function(t){return 0===t.children().length?(t.wrapInner("<p />"),!0):0===t.children().not("br").length?(t.contents().filter(function(){return 3===this.nodeType}).wrap("<p />").end().filter("br").remove(),!0):!1},destroy:function(){var t=this;t.$element.removeData("plugin_"+a)}},t.fn[a]=function(e){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new i(this,e))})}}(t,window,document)});
//# sourceMappingURL=truncatr.js.map